---
title: LIFO与FIFO策略
description: 了解后进先出和后进先出战略之间的区别以及何时使用每种方法
source-git-commit: ed340643e807d786638d59f9bf07d73b7f909a72
workflow-type: tm+mt
source-wordcount: '685'
ht-degree: 0%

---


# LIFO与FIFO策略 {#lifo-fifo-strategies}

实施并发监视时，当达到使用限制时，您需要选择两种基本策略来处理冲突：**LIFO (Last In， First Out)**&#x200B;或&#x200B;**FIFO (First In， First Out)**。 了解这些策略对于设计正确的用户体验和实施适当的错误处理至关重要。

## 并发监控会话策略 {#concurrency-monitoring-session-strategies}

LIFO和FIFO均基于计算机科学中的&#x200B;**栈栈理论**：

### LIFO(Last In， First Out) — 栈栈行为

在并发监控中：
- **较旧的会话受到较新的会话的保护**
- **达到限制时阻止新会话**
- **用户必须手动终止现有会话才能启动新会话**


### FIFO（先进先出） — 队列行为

在并发监控中：
- 当达到限制时，**新会话可以终止旧会话**
- **最近的流可以“启动”较旧的流**
- **用户可以通过替换正在观看的内容来开始新内容**

## LIFO策略 {#lifo-strategy}

### LIFO的工作原理

在后进先出模式下，当用户尝试启动新流并点击并发限制时：

1. **新会话被阻止**，响应为409冲突
2. **现有会话保持不变**
3. **用户必须手动终止**&#x200B;现有会话才能继续

### 后进先出流程图

![后进先出流程图](../assets/lifo-flow-diagram.png)

*图：后进先出(LIFO， Last In， First Out)策略流 — 达到限制时会阻止新会话，需要手动终止现有会话。*

### 何时使用后进先出

**在以下情况下使用后进先出：**
- **用户希望其当前内容受到保护**&#x200B;不受中断
- **您想要鼓励有关内容切换的有意识决策**
- **您的应用程序用于解决冲突的UI复杂性有限**
- **用户通常长时间观看内容**

**示例：**
- 用户观看完整内容的电影流服务
- 中断会造成中断的教育内容平台
- 具有简单UI且无法处理复杂会话选择的应用程序

## 先进先出战略 {#fifo-strategy}

### FIFO的工作原理

在FIFO模式下，当用户尝试启动新流并点击并发限制时：

1. 允许&#x200B;**新会话**&#x200B;启动
2. **最旧的会话被自动终止** （或者用户选择要终止的会话）
3. **用户继续添加新内容**

### 先进先出流程图

![FIFO流程图](../assets/fifo-flow-diagram.png)

*图： FIFO（先进先出）策略流程 — 新会话可以通过用户选择终止现有会话来启动。*

### 何时使用FIFO

**在以下情况下使用FIFO：**
- **用户经常在内容之间切换**（渠道冲浪、浏览）
- **您希望将用户的当前意图**&#x200B;优先于过去的活动
- **当发生冲突时，您的UI可以处理会话选择**
- **用户期望能够启动新内容**，即使已达到限制

**示例：**
- 用户频繁切换频道的实时电视应用程序
- 用户浏览和预览内容的内容发现应用程序
- 用户希望即时响应的移动应用程序

### 先进先出用户体验

当在FIFO模式下发生冲突时：

1. **显示所有活动会话的对话框**
2. **允许用户选择要终止的会话**
3. **提供会话详细信息**（设备、内容、持续时间）
4. **在继续之前确认操作**
5. **终止后启动新会话**

## 主要区别摘要 {#key-differences-summary}

| 长宽比 | FIFO | 后进先出 |
|-------------------------------|-----------------------------------------|-------------------------------|
| **冲突解决** | 自动终止最早的会话 | 需要手动终止 |
| **错误处理** | 无需处理409响应 | 必须处理409个响应 |
| **用户体验** | UI更复杂，但流程更流畅 | UI更简单，但摩擦更严重 |
| **实现复杂性** | 更高（会话选择UI） | 下限（简单错误消息） |
| **用例** | 内容切换、发现 | 扩展的查看、保护 |


## 最佳实践 {#best-practices}

### 对于后进先出实施

1. **显示说明限制的清除错误消息**
2. **提供对会话管理的轻松访问**
3. **显示活动会话**&#x200B;以供用户参考
4. **在您的应用程序设置中实施会话终止**
5. **考虑在冲突发生之前显示使用情况指示器**

### 对于FIFO实施

1. 发生冲突时&#x200B;**始终提供会话选择UI**
2. **显示有意义的会话详细信息**（设备、内容、持续时间）
3. **实施确认对话框**&#x200B;以防止意外终止
4. **处理终止失败的边缘案例**
5. **提供明确的反馈**&#x200B;所发生的情况


## 选择策略 {#choosing-your-strategy}

在选择LIFO和FIFO时，请考虑以下因素：

1. **用户行为模式** — 用户通常如何与您的内容交互？
2. **内容类型** — 直播电视与电影与教育内容
3. **UI复杂性** — 您的应用程序能否处理复杂的会话选择？
4. **用户期望** — 用户是否期望能够轻松切换内容？
5. **业务要求** — 是否需要保护某些类型的查看？
