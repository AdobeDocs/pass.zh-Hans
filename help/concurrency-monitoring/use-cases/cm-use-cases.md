---
title: 用例
description: 并发监控中的用例。
exl-id: 6cc30bb6-e985-4d9a-9f99-a7f04ae8deb7
source-git-commit: ed340643e807d786638d59f9bf07d73b7f909a72
workflow-type: tm+mt
source-wordcount: '443'
ht-degree: 0%

---

# 用例 {#use-cases}

流计数服务的主要用例是计数用户观看的并发视频流的数量，并提供有关其对于同一帐户ID的并发使用的决策。

为了监视订阅者的使用情况，需要一种集中式服务，该服务可以聚合用户活动，而不管该活动发生在程序员的网站或应用程序上、在MVPD的内容门户上还是在联合资产上。

此集中化服务支持的主要用例应为：

1. 一旦订阅者开始观看视频，应用程序就可以&#x200B;**初始化流会话**&#x200B;并启动&#x200B;**报告活动**&#x200B;数据。
1. 在同一中心服务中，另一个实例将接收&#x200B;***CM决策*** — 如果应用程序在CM服务中注册了一个或多个策略，则服务将根据当前活动以访问决策做出响应。

## 常见用例 {#common-use-cases}

### 基本流限制

限制所有应用程序中每个订阅者的并发流数量。

### 基于设备的限制

每种设备类型（移动设备、平板电脑、电视等）只允许一定数量的流。

### 特定于内容的规则

对实时内容与VOD内容应用不同的限制。

### 基于位置的策略

根据地理位置或网络类型限制流式传输。

## 创建会话 {#create-session}

此API调用允许客户端在用户按“播放”按钮观看某些内容时创建新的CM会话。 服务器响应将包含用于保持活动状态的新流URL（包含流ID）以及流超时时间。 客户端应用程序应通过心率报告活动。 会话初始化调用必须以键值对的形式包含元数据，作为表单数据（或查询字符串参数）发送。 此外，响应还将包括指示播放是否“符合策略”的标志。 如果不是，则不允许播放。

## 报告活动 {#reporting-activity}

创建会话后，应用程序需要定期发送心跳，以便该流保持活动状态。 此外，建议客户端应用程序在用户停止播放后停止流，以使流在超时前不会计为活动状态。

心率调用的响应可以允许客户端应用程序继续视频播放（当它符合策略时），也可以指示它停止视频播放。 如果视频流不兼容，客户端应用程序必须停止它。 响应将提供信息以便客户端应用程序显示错误消息和/或用户继续播放的可用操作。
